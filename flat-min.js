var FlatJS={};FlatJS.Classy=function(){var t=[],e=[],i=false;fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;var r=function(){this._=function(e,i){if(typeof e==="function"){var r=this,n=t[r]=t[r]||[];this.icnt=this.icnt||n.length+1;n=n[this.icnt]=n[this.icnt]||[];var a=n[e]=n[e]||function(){n[e][r.icnt]=this;return e.apply(r,arguments)}}else{var a=this._(s)(e,i)}return a}};r.extend=function(t){if(typeof t==="function"){t=t()}var e=this.prototype;i=true;var r=new this;i=false;for(var s in t){r[s]=typeof t[s]=="function"&&typeof e[s]=="function"&&fnTest.test(t[s])?function(t,i){return function(){var r=this._super;this._super=e[t];var s=i.apply(this,arguments);this._super=r;return s}}(s,t[s]):t[s]}function n(){if(!i&&this.init){this.init.apply(this,arguments)}n.fjsObjects.push(this)}for(var s in this){if(!n[s]){n[s]=this[s]}}n.prototype=r;n.prototype.constructor=n;n.extend=arguments.callee;n.fjsObjects=[];return n};function s(t,i){var r=e[this]=e[this]||[];r=r[t]=r[t]||[];this.varcnt=this.varcnt||r.length+1;r[this.varcnt]=typeof i!=="undefined"?i:r[this.varcnt]||null;return r[this.varcnt]}return r}();FlatJS.Runner=function t(e){e=e||{};var i=e.context||window,r=e.node||document,s=e.init!==undefined?e.init:true,n=e.attr||"fjs-component",a=e.objKey||"fjsComponents",f=e.findFn||function(t){t()},o=e.callFn||false;var u=FlatJS.Helpers.getAllElementsWithAttribute;this.init=function(t){t=t||r;var e=u(n,t),i=e.length;for(var s=0;s<i;s++){c(e[s])}};function c(t){var e=t.getAttribute(n);if(typeof e!=="string"){return}e=e.split(" ");var r=e.length;for(var s=0;s<r;s++){(function(){var r=e[s];var n=FlatJS.Helpers.convertDashedToCamelCase(r);f(function(){l(t,n,i)},t,r)})()}}function l(t,e,i){var r=FlatJS.Helpers.findFunctionByString(e,i);return h(r,t,e)}function h(t,e,i){if(!e[a]){e[a]={}}if(typeof o==="function"){var r=o(t,e)}else{var r=new t(e)}e[a][i]=r;return r}if(s){this.init()}};FlatJS.Helpers={convertDashedToCamelCase:function(t){if(t){t=t.replace(/-([a-z0-9])/g,function(t){return t[1].toUpperCase()}).replace(/\s+/g,"")}return t},isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},getAllElementsWithAttribute:function(t,e){var i=[],r=e.getElementsByTagName("*"),s=r.length;for(var n=0;n<s;n++){if(r[n].getAttribute(t)!==null){i.push(r[n])}}if(e!==document&&e.getAttribute&&e.getAttribute(t)!==null){i.push(e)}return i},findFunctionByString:function(t,e,i){e=e||window;if(t.indexOf&&t.indexOf(".")!==-1){t=t.split(".")}if(typeof t==="string"&&typeof e[t]==="function"){return e[t]}else if(typeof t!=="object"){return false}var r=e[t[0]]||{},s=r[t[1]];if(typeof r==="object"&&typeof s==="function"){return s}else if(typeof s==="object"&&t[2]){t.splice(0,1);return this.findFunctionByString(t,r,i)}else if(i&&t[1]){var r=e[t[0]]=e[t[0]]||{};t.splice(0,1);return this.findFunctionByString(t,r,i)}else if(i){e[t[0]]=i;return e[t[0]]}}};FlatJS.Widget=function(){var t=FlatJS.Classy.extend({init:function(t){this.fjsRootNode=t;if(this.renderOnInit!==false&&typeof this.render==="function"){this.render()}},render:function(){if(!this._("fjsHasRendered")){this._("fjsHasRendered",true)}else{this.unbindUI()}this.initializer();this.renderUI();this.bindUI();this.syncUI()},initializer:function(){},renderUI:function(){},bindUI:function(){},unbindUI:function(){},syncUI:function(){}});return t}();FlatJS.Dispatch=function(){var t={};var e={publish:function(e,i){if(t[e]){for(var r=0;r<t[e].length;r++){if(t[e][r]){t[e][r].fn.apply(this,i)}}}},subscribe:function(e,i){if(!t[e]){t[e]=[]}t[e].push({instance:this,fn:i})},unsubscribe:function(i,r){if(t[i]){if(r){for(var s=0;s<t[i].length;s++){var n=t[i][s];if(n&&n.fn&&n.fn===r){t[i].splice(n,1)}}}else{if(this!==e){for(var s=0;s<t[i].length;s++){var n=t[i][s];if(n&&n.instance&&n.instance===this){t[i].splice(n,1)}}}else{t[i]=[]}}}else if(!i&&!r&&this!==e){for(var a in t){var i=t[a];for(var f in i){var n=i[f];if(typeof n.fn==="function"&&n.instance===this){i.splice(n,1)}}}}}};if(FlatJS.Classy){FlatJS.Classy.prototype.publish=function(t,i){this._(e.publish)(t,i)};FlatJS.Classy.prototype.subscribe=function(t,i){this._(e.subscribe)(t,i)};FlatJS.Classy.prototype.unsubscribe=function(t,i){this._(e.unsubscribe)(t,i)}}if(FlatJS.Widget){FlatJS.Widget.prototype.destroy=function(){this.unsubscribe()}}return e}();FlatJS.Resource=FlatJS.Classy.extend(function(){var t={init:function(t){this._("fjsNodes",[]);this._("fjsCbs",{});if(!this.id||t&&!t.id){this.id=this._(e)()}this.extend(t)},get:function(t,e){t=t.split(".");var i=this;for(var r=0;r<t.length;r++){if(e!==undefined&&r===t.length-1){i[t[r]]=e}i=i[t[r]]}return i},set:function(t,e){var r=this.get(t);this.get(t,e);if(this._("fjsCbs")){var s=this._("fjsCbs")[t];for(var n in s){var a=s[n];i(a,t,r,e,this)}if(this._("fjsCbs")["all"]){var a=this._("fjsCbs")["all"];i(a,t,r,e,this)}}},watch:function(t,e){var i=this._("fjsCbs");i[t]=i[t]||{};i[t][e]=i[t][e]||[];i[t][e].push(e);this._("fjsCbs",i)},unwatch:function(t,e){var i=this._("fjsCbs");if(i&&i[t]){if(e&&i[t][e]){delete i[t][e]}else if(!e){delete i[t]}}else{this._("fjsCbs",{})}},extend:function(t){return FlatJS.Resource.objExtend(this,t)},push:function(t,e){var i=this.get(t);if(i&&typeof i.push==="function"&&typeof i.slice==="function"){var r=i.slice();r.push(e);this.set(t,r)}},remove:function(){for(n in this._("fjsNodes")){var t=this._("fjsNodes")[n];if(t&&t.parentNode){t.parentNode.removeChild(t)}}var e=this.constructor.fjsObjects.indexOf(this);this.constructor.fjsObjects.splice(e,1);this.set("fjsRemove",true)}};function e(){var t=Math.floor(Math.random()*9999+1)*-1;if(this.constructor.find(t)){return this._(e)()}else{return t}}function i(t,e,i,r,s){for(var n=0;n<t.length;n++){var a=t[n];if(typeof a=="function"){a(r,i,e,s)}}}return t});FlatJS.Resource.find=function(t){var e;for(var i=0;i<this.fjsObjects.length&&!e;i++){var r=this.fjsObjects[i];if(r.id==t){e=r}}return e};FlatJS.Resource.objExtend=function(){var t={};var e=function(e){return e==null?String(e):t[toString.call(e)]||"object"};var i=function(t){return t!=null&&t==t.window};var r=function(t){return toString.call(t)==="[object Function]"};var s=Array.isArray||function(t){return e(t)==="array"};var n=function(t){if(!t||e(t)!=="object"||t.nodeType||i(t)){return false}try{if(t.constructor&&!hasOwn.call(t,"constructor")&&!hasOwn.call(t.constructor.prototype,"isPrototypeOf")){return false}}catch(r){return false}var s;for(s in t){}return s===undefined||hasOwn.call(t,s)};var a=function(){var t,e,i,f,o,u,c=arguments[0]||{},l=1,h=arguments.length,d=false;if(typeof c==="boolean"){d=c;c=arguments[1]||{};l=2}if(typeof c!=="object"&&!r(c)){c={}}if(h===l){c=this;--l}for(;l<h;l++){if((t=arguments[l])!=null){for(e in t){i=c[e];f=t[e];if(c===f){continue}if(d&&f&&(n(f)||(o=s(f)))){if(o){o=false;u=i&&s(i)?i:[]}else{u=i&&n(i)?i:{}}c[e]=a(d,u,f)}else if(f!==undefined){c[e]=f}}}}return c};return a}();FlatJS.Component=FlatJS.Widget.extend(function(){var t={resource:"fjs-resource",json:"fjs-json",id:"fjs-id","class":"fjs-class",key:"fjs-key",array:"fjs-array",object:"fjs-obj"},e=FlatJS.Helpers.convertDashedToCamelCase;var i={fjsData:undefined,render:function(){this._(s)();this._(c)();this._(k)();this._(n)(true);this._(A)();this._(_)();this._super()},findResourceFromNode:function(e){if(e.hasAttribute&&e.hasAttribute(t.resource)&&e.hasAttribute(t.id)){var i=r(e.getAttribute(t.resource));return i.find(e.getAttribute(t.id))}else if(e===document){return false}else{return this.findResourceFromNode(e.parentNode)}}};function r(t){return FlatJS.Helpers.findFunctionByString(e(t))}function s(){this.fjsData=this.fjsData||new FlatJS.Resource}function n(e,i){i=i||this.fjsRootNode;var r=FlatJS.Helpers.getAllElementsWithAttribute(t.class,i);for(var s=0;s<r.length;s++){var n=r[s],f=this.findResourceFromNode(n)||this.fjsData;this._(a)(n,f,e)}}function a(e,i,r){var s=JSON.parse(e.getAttribute(t.class)),s=s[0].push?s:[s];for(var n=0;n<s.length;n++){var a=s[n],o=a[0],u=a[1],c=a[2],l=a[3],h=i[o]==u;if(r&&e.className.indexOf(c)!==-1){i.set(o,u)}this._(f)(e,h,c,l)}}function f(t,e,i,r){if(e){if(t.className.indexOf(i)===-1){t.className=t.className+" "+i+" "}t.className=t.className.replace(r,"")}else if(!e){t.className=t.className.replace(i,"");t.className=t.className.replace(r,"");if(r&&t.className.indexOf(r)===-1){t.className=t.className+" "+r+" "}}}function o(t){var e=t.getAttribute("type");if(t.innerHTML&&!t.value){return t.innerHTML}else if(e=="checkbox"||e=="radio"){return t.checked?t.value!=="on"?t.value:true:t.checked}else if(t.value){return t.value}}function u(t,e){var i=t.getAttribute("type"),e=e!==undefined?e:"";if(i=="checkbox"){if(typeof e==="boolean"){t.checked=e}else if(typeof e==="string"){t.checked=true;t.value=e?e:t.value}else if(typeof e==="object"){t.checked=e.selected;t.value=e.value}}else if(i=="radio"){if(typeof e==="boolean"){t.checked=e}else if(t.value==e){t.checked=true}else{t.checked=false}}else if(i=="text"||typeof t.value!=="undefined"){t.value=e}else if(typeof t.innerHTML!=="undefined"){t.innerHTML=e}}function c(e){e=e||this.fjsRootNode;var i=FlatJS.Helpers.getAllElementsWithAttribute(t.resource,e);for(var r=0;r<i.length;r++){var s=i[r];this._(l)(s)}}function l(i){var r=i.getAttribute(t.id),s=e(i.getAttribute(t.resource)),n=FlatJS.Helpers.findFunctionByString(s,window,FlatJS.Resource.extend({})),a=n.find(r)||new n({id:r});a.modelName=a.modelName||s;if(a._("fjsNodes").indexOf(i)===-1){a._("fjsNodes").push(i)}if(i.hasAttribute(t.json)){a.extend(JSON.parse(i.getAttribute(t.json)))}this._(h)(a,i);return a}function h(e,i){var r=i.childNodes;for(var s=0;s<r.length;s++){var n=r[s];if(n&&n.hasAttribute){if(n.hasAttribute(t.key)){this._(v)(e,n)}else if(n.hasAttribute(t.array)){this._(d)(e,n)}}if(n.childNodes&&n.childNodes.length>0){if(n.hasAttribute&&!n.hasAttribute(t.resource)){this._(h)(e,n)}}}}function d(i,r){var s=r.childNodes,n=e(r.getAttribute(t.array)),a=i[n]=i[n]||[];for(var f=0;f<s.length;f++){var o=s[f];if(o.hasAttribute&&o.hasAttribute(t.resource)){var u=this._(l)(o);if(a.indexOf(u)==-1){a.push(u)}}}}function v(i,r){var s=e(r.getAttribute(t.key)),n=this._(o)(r);i[s]=n}function p(i,r,s,a){for(var f=0;f<a._("fjsNodes").length;f++){var o=a._("fjsNodes")[f],c=s.split("."),c=c[c.length-1];if(o&&o.getAttribute(t.key)&&e(o.getAttribute(t.key))===c){this._(u)(o,i)}else if(o&&a.get(s)&&a.get(s).length&&a.get(s).push&&o.hasAttribute(t.array)&&e(o.getAttribute(t.array))===c){this._(b)(o,i,r,a)}else if(o&&o.hasAttribute(t.object)&&e(o.getAttribute(t.object))===c){this._(j)(o,a)}else if(o&&o.hasAttribute(t.class)){this._(n)(false,o)}}}function b(t,e,i,r){this._(g)(e,t);this._(A)(t);this._(c)(t);this._(n)()}function g(e,i){var r=i.childNodes,s=i.fjsTemplate,n=[];for(var a=0;a<r.length&&!s;a++){var f=r[a];if(f.hasAttribute){s=i.fjsTemplate=f.cloneNode(true)}}i.innerHTML="";for(var o=0;o<e.length;o++){var u=e[o];if(u){if(!u.id||u.id&&u.constructor.find(u.id)){var c=s.cloneNode(true),l=this._(y)(c,u,true);if(u.id){l.setAttribute(t.id,u.id)}i.appendChild(l)}}}}function y(t,e,i){var r=t.childNodes;for(var s=0;s<r.length;s++){var n=r[s];if(n.hasAttribute){this._(j)(n,e)}}if(i){return t}}function j(e,i){var r;if(e.hasAttribute(t.key)){r=FlatJS.Helpers.convertDashedToCamelCase(e.getAttribute(t.key));this._(u)(e,i[r]);if(i[r]==true&&(e.getAttribute("type")==="radio"||e.getAttribute("type")==="checkbox")){i[r]=this._(o)(e)}}else if(e.hasAttribute(t.object)){r=FlatJS.Helpers.convertDashedToCamelCase(e.getAttribute(t.object));if(i[r]){this._(y)(e,i[r])}}else if(e.getAttribute(t.resource)){r=FlatJS.Helpers.convertDashedToCamelCase(e.getAttribute(t.resource));if(i[r].id){e.setAttribute(t.id,i[r].id)}this._(y)(e,i[r])}else if(e.hasAttribute(t.array)){var r=FlatJS.Helpers.convertDashedToCamelCase(e.getAttribute(t.array)),s=i[r];if(s&&e.childNodes){this._(g)(s,e)}}else if(e.childNodes&&e.childNodes.length>0){this._(y)(e,i)}}function _(){var i=FlatJS.Helpers.getAllElementsWithAttribute(t.key,this.fjsRootNode);for(var r=0;r<i.length;r++){var s=i[r];if(s&&s.fjsObject){key=e(s.getAttribute(t.key)),attr=s.fjsObject[key];if(attr){this._(u)(s,attr)}}}}function A(e){e=e||this.fjsRootNode;this._(N)(t.key,e);this._(N)(t.array,e);this._(N)(t.object,e);this._(N)(t.class,e)}function N(i,r){var s=FlatJS.Helpers.getAllElementsWithAttribute(i,r);for(var n=0;n<s.length;n++){var a=s[n],f=this.findResourceFromNode(a)||this.fjsData;if(a&&!a.fjsWatchSet){a.fjsWatchSet=true;a.fjsObject=a.fjsObject||f;if(f._("fjsNodes").indexOf(a)===-1){f._("fjsNodes").push(a)}if(i===t.class){this._(m)(a,f)}else{var o=e(a.getAttribute(i)),u=a.parentNode&&a.parentNode!==document?this._(C)(o,a.parentNode):o;f.watch(u,this._(p));if(this._(J)(a)){this._(S)(a)}}}}}function m(i,r){var s=JSON.parse(i.getAttribute(t.class)),s=s[0].push?s:[s];for(var n=0;n<s.length;n++){var a=s[n],f=a[0],o=i.parentNode&&i.parentNode!==document?this._(C)(f,i.parentNode):f,o=e(o);r.watch(o,this._(p))}}function S(t){var e=t.getAttribute("type"),e=!e||e==="text",i=typeof jQuery==="function"?jQuery:false;if(i){i(t).on(e?"keyup":"change",this._(F))}else{t.addEventListener(e?"keyup":"change",this._(F))}}function F(i){var r=i.currentTarget,s=this._(o)(r),n=e(r.getAttribute(t.key)),a=r.parentNode&&r.parentNode!==document?this._(C)(n,r.parentNode):n,f=this.findResourceFromNode(r)||this.fjsData;f.set(a,s)}function J(t){var e=t.tagName,i=false,r=["INPUT","TEXTAREA"];return r.indexOf(e)!==-1}function C(i,r){if(r.hasAttribute(t.object)){i=e(r.getAttribute(t.object))+"."+i}if(r.parentNode&&r.parentNode!==this.fjsRootNode&&r.parentNode!==document){return this._(C)(i,r.parentNode)}else{return i}}function k(i,r){r=r||this.fjsRootNode.childNodes;i=i||this.fjsData;var s=FlatJS.Helpers.isArray(i);for(var n=0;n<r.length;n++){var a=r[n];if(a.hasAttribute){var f=a.hasAttribute(t.resource);if(a.hasAttribute(t.key)){var u=e(a.getAttribute(t.key));if(a.getAttribute("type")==="radio"){i[u]=i[u]||this._(o)(a)}else{i[u]=this._(o)(a)}}else if(f||a.hasAttribute(t.object)){this._(O)(a,i,f,s)}else if(a.hasAttribute(t.array)){this._(x)(a,i,s)}else{this._(R)(a,i)}}}}function x(i,r,s){var n=i.childNodes,a=false,f=e(i.getAttribute(t.array));r=r[f]=[];for(var o=0;o<n.length&&!a;o++){var u=n[o];if(u&&u.hasAttribute){i.fjsTemplate=i.fjsTemplate||u.cloneNode(true);if(u.hasAttribute(t.resource)){a=true;this._(k)(r,n)}else{var c={};r.push(c);this._(k)(c,u.childNodes)}}}}function O(i,s,n,a){var f=i.hasAttribute(t.object),o=e(i.getAttribute(f?t.object:t.array));if(n){var u=r(i.getAttribute(t.resource)),c=u?u.find(i.getAttribute(t.id)):false;if(c){if(a){s.push(c)}else{s[o]=c}c.watch("fjsRemove",this._(T))}}else{this._(R)(i,s,o,f)}}function R(t,e,i,r){if(t.childNodes&&t.childNodes.length>0){if(i){e=e[i]=r?{}:[]}this._(k)(e,t.childNodes)}}function T(t,e,i,r){this._(H)(r,this.fjsData)}function H(t,e,i){for(var r in e){if(e[r]===t){e[r]=undefined;delete e[r]}else if(typeof e[r]==="object"){this._(H)(t,e[r],e)}}}return i});